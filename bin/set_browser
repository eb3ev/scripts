#!/bin/sh

. "${SCRIPTS_DIR:-$HOME/scripts}/scriptsrc"
. "$lib/var/config"
. "$lib/lines"
. "$lib/program"
. "$lib/browser"

get_available_browsers () {
    browser_list=$(get_names)
    for browser in $browser_list
    do
        browser_cmd=$(get_cmd "$browser")

        if [ "$(installed "$browser_cmd")" = "true" ]
        then
            new_browser_list=$(list_add "$new_browser_list" "$browser")
        fi
    done

    get_names "$new_browser_list"
}

new_browser=$(get_available_browsers | menu 2 "Browsers")

if [ -n "$new_browser" ]
then
    if [ -s "$browserrc" ]
    then
        sed -i '1,$d' "$browserrc"
    fi

    echo "$new_browser" >> "$browserrc"
fi

