#!/bin/sh

. "$SCRIPTS_HOME/scriptsrc"
. "$lib/program"

toggle() {
    if [ -z "$(pgrep -x "$1")" ]
    then
        notify-send "$1" "On" &
        eval "$1 $2"
    else
        killall -s SIGKILL "$1" && sleep 1 && notify-send "$1" "Off" 2>/dev/null
    fi
}

program="${1:-$(exec_program --print-cmd --promt="Toggle")}"

if [ "$(installed "$program")" = "true" ]
then
    toggle "$program" "$2"
fi

