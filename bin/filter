#!/bin/sh

. "${SCRIPTS_RC:-$HOME/scripts}/scriptsrc"
. "$lib/lines"

filter="$lib/filter"

args=""
vals=""

for arg in "$@"
do
    case "$arg" in
        "--txt"|"--doc"|"--img"|"--vid")
            args=$(list_add "$args" "$arg")
            ;;
        *) vals=$(list_add "$vals" "$arg") ;;
    esac
done

if [ -z "$vals" ]
then
    read -d '' vals
fi

if [ -n "$args" ]
then
    for arg in "$args"
    do
        case "$1" in
            "--txt") echo "$vals" | $filter/files/filter_txt.awk ;;
            "--doc") echo "$vals" | $filter/files/filter_doc.awk ;;
            "--img") echo "$vals" | $filter/files/filter_img.awk ;;
            "--vid") echo "$vals" | $filter/files/filter_vid.awk ;;
        esac
    done
else
    echo "$vals"
fi

