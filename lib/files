#!/bin/sh

. "${SCRIPTS_DIR:-${0%/*}/..}/scriptsrc"
. "$lib/program"
. "$lib/lines"

find_cmd() {
    if [ "$(installed fd)" = "true" ]
    then
        use_fd="true"
    else
        use_fd="false"
    fi

    vals=""

    if [ -n "$1" ]
    then
        IFS="
"
        for dir in $1
        do
            if [ "$use_fd" = "true" ]
            then
                vals=$(list_add "$vals" "$(fd . "$(printf "%s" "$dir")" -H -I -t f)")
            else
                vals=$(list_add "$vals" "$(find "$(printf "%s" "$dir")" -type f)")
            fi
        done
        unset IFS
    else
        if [ "$use_fd" = "true" ]
        then
            vals=$(fd . -H -I -t f)
        else
            vals=$(find . -type f)
        fi
    fi

    echo "$vals"
}

set_value() {
    if [ -s "$2" ]
    then
        sed -i '1,$d' "$2"
    fi

    echo "$1" >> "$2"
}

create_file() {
    if [ ! -e "$1" ]
    then
        mkdir -p "${1%/*}" && printf "" > "$1"
    fi
}

create_script_file() {
    if [ ! -e "$1" ]
    then
        mkdir -p "${1%/*}" && echo '#!/bin/sh' > "$1" && chmod +x "$1"
    fi
}

